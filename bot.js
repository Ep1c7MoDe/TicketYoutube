const Discord = require("discord.js");
const client = new Discord.Client();
client.on('message', async message => {
 
   if (message.content.startsWith("$new")) {  
        const reason = message.content.split(" ").slice(1).join(" ");  
        if (!message.guild.roles.exists("name", "Support Team")) return message.channel.send(`Ù„Ø§Ø²Ù… ØªØ³ÙˆÙŠ Ø±ØªØ¨Ø© Ø§Ø³Ù…Ù‡Ø§ \`Support Team\` ÙˆØªÙ†Ø·ÙŠ Ø§Ù„Ø¨ÙˆØª Ø§Ø¯Ù…Ù†ÙŠØªØ± Ø­ØªØ§ ÙŠÙ‚Ø¯Ø± ÙŠØ³ÙˆÙŠ Ø§Ù„Ø±ÙˆÙ…Ø§Øª ÙˆÙŠØ¹Ø¯Ù„ Ø¨Ø±Ù…Ø´Ù†Ø§Øª`);
        if (message.guild.channels.exists("name", "ticket-{message.author.id}" + message.author.id)) return message.channel.send(`You already have a ticket open.`);    /// ALPHA CODES
        message.guild.createChannel(`ticket-${message.author.username}`, "text").then(c => {
            let role = message.guild.roles.find("name", "Support Team");
            let role2 = message.guild.roles.find("name", "@everyone");
            c.overwritePermissions(role, {
                SEND_MESSAGES: true,
                READ_MESSAGES: true
            });  
            c.overwritePermissions(role2, {
                SEND_MESSAGES: false,
                READ_MESSAGES: false
            });
            c.overwritePermissions(message.author, {
                SEND_MESSAGES: true,
                READ_MESSAGES: true
            });
            message.channel.send(`:white_check_mark: ØªÙ… Ø§Ù†Ø´Ø§Ø¡ ØªØ°ÙƒØ±ØªÙƒ, #${c.name}.`);
            const embed = new Discord.RichEmbed()
                .setColor(d1631e)
                .addField(`Hey ${message.author.username}!`, `:white_check_mark:  ØªÙ… Ø§Ù†Ø´Ø§Ø¡ ØªØ°ÙƒØ±ØªÙƒ, #ticket`)
                .setTimestamp();
            c.send({
                embed: embed
            });
        }).catch(console.error);
    }
 
 
  if (message.content.startsWith("-close")) {
        if (!message.channel.name.startsWith(`ticket-`)) return message.channel.send(`You can't use the close command outside of a ticket channel.`);
 
       message.channel.send(`Ù‡Ù„ Ø§Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù‚ÙØ§Ù„Ùƒ Ù„Ù„ØªØ°ÙƒØ±Ø© Ø§Ø°Ø§ Ù…ØªØ£ÙƒØ¯ Ø§ÙƒØªØ¨confirm`)
           .then((m) => {
               message.channel.awaitMessages(response => response.content === 'confirm', {
                       max: 1,
                       time: 10000,
                       errors: ['time'],
                   })  
                   .then((collected) => {
                       message.channel.delete();
                   })  
                   .catch(() => {
                       m.edit('Ù„Ù… ÙŠØªÙ… ØªÙ‚ÙÙŠÙ„ Ø§Ù„ØªÙƒØª').then(m2 => {
                           m2.delete();
                       }, 3000);
                   });
           });
   }
 
});
 
 
client.login("NTg5MjYxMzIxMTI4OTAyNzE0.XQRGZQ.UPRg2a1RDF4Z2URA6UVZz3As1Jc");

client.on("message", message => {
    var prefix = "$";
        if (message.author.id === client.user.id) return;
        if (message.guild) {
       let embed = new Discord.RichEmbed()
        let args = message.content.split(' ').slice(1).join(' ');
    if(message.content.split(' ')[0] == prefix + 'bc') {
        if (!args[1]) {
    message.channel.send("**bc <message>**");
    return;
    }
            message.guild.members.forEach(m => {
       if(!message.member.hasPermission('ADMINISTRATOR')) return;
                m.send(args);
            });
            const AziRo = new Discord.RichEmbed()
            .setAuthor(message.author.username, message.author.avatarURL)   
            .setTitle('âœ…| Ø¬Ø§Ø±ÙŠ Ø§Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„ØªÙƒ ') 
            .addBlankField(true)
            .addField('â™¨| Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ù…Ø±Ø³Ù„ Ù„Ù‡Ù… ', message.guild.memberCount , true)        
            .addField('ğŸ“| Ø§Ù„Ø±Ø³Ø§Ù„Ø© ', args)
            .setColor('RANDOM')  
            message.channel.sendEmbed(AziRo);          

const Discord = require('discord.js');
const client = new Discord.Client();
var prefix = "$"
 
client.on('message',async message => {
  var room;
  var title;
  var duration;
  var gMembers;
  var filter = m => m.author.id === message.author.id;
  if(message.content.startsWith(prefix + "giveaway")) {
     //return message.channel.send(':heavy_multiplication_x:| **Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…Ø± Ù…Ø¹Ø·Ù„ Ø­Ø§Ù„ÙŠØ§.. ``Ø­Ø§ÙˆÙ„ ÙÙŠ ÙˆÙ‚Øª Ù„Ø§Ø­Ù‚``**');
    if(!message.guild.member(message.author).hasPermission('MANAGE_GUILD')) return message.channel.send(':heavy_multiplication_x:| **ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù„Ø¯ÙŠÙƒ Ø®Ø§ØµÙŠØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±**');
    message.channel.send(`:eight_pointed_black_star:| **Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ©**`).then(msgg => {
      message.channel.awaitMessages(filter, {
        max: 1,
        time: 20000,
        errors: ['time']
      }).then(collected => {
        let room = message.guild.channels.find('name', collected.first().content);
        if(!room) return message.channel.send(':heavy_multiplication_x:| **Ù„Ù… Ø§Ù‚Ø¯Ø± Ø¹Ù„Ù‰ Ø§ÙŠØ¬Ø§Ø¯ Ø§Ù„ØºØ±ÙØ©**');
        room = collected.first().content;
        collected.first().delete();
        msgg.edit(':eight_pointed_black_star:| **Ø§ÙƒØª ÙˆÙ‚Øª Ø§Ù„Ù‚ÙŠÙ Ø§ÙˆÙŠ**').then(msg => {
          message.channel.awaitMessages(filter, {
            max: 1,
            time: 20000,
            errors: ['time']
          }).then(collected => {
            if(isNaN(collected.first().content)) return message.channel.send(':heavy_multiplication_x:| **ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø§Ù† ØªØ­Ø¯Ø¯ ÙˆÙ‚Øª Ø²Ù…Ù†ÙŠ ØµØ­ÙŠØ­.. ``ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø§Ø¹Ø§Ø¯Ø© ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ù…Ø±``**');
            duration = collected.first().content * 60000;
            collected.first().delete();
            msgg.edit(':eight_pointed_black_star:| **Ø¹Ù„Ù‰ Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø§Ù„Ù‚ÙŠÙ Ø§ÙˆÙŠ**').then(msg => {
              message.channel.awaitMessages(filter, {
                max: 1,
                time: 20000,
                errors: ['time']
              }).then(collected => {
                title = collected.first().content;
                collected.first().delete();
                try {
                  let giveEmbed = new Discord.RichEmbed()
                  .setAuthor(message.guild.name, message.guild.iconURL)
                  .setTitle(title)
                  .setDescription(`Ø§Ù„Ù…Ø¯Ø© : ${duration / 60000} Ø¯Ù‚Ø§Ø¦Ù‚`)
                  .setFooter(message.author.username, message.author.avatarURL);
                  message.guild.channels.find('name', room).send(giveEmbed).then(m => {
                     let re = m.react('ğŸ’–');
                     setTimeout(() => {
                       let users = m.reactions.get("ğŸ’–").users;
                       let list = users.array().filter(u => u.id !== m.author.id);
                       let gFilter = list[Math.floor(Math.random() * list.length) + 0];
                         if(users.size === 1) gFilter = '**Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ¯**';
                       let endEmbed = new Discord.RichEmbed()
                       .setAuthor(message.author.username, message.author.avatarURL)
                       .setTitle(title)
                       .addField('Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ù‚ÙŠÙ Ø§ÙˆØ§ÙŠ !',`Ø§Ù„ÙØ§Ø¦Ø² Ù‡Ùˆ : ${gFilter}`)
                       .setFooter(message.guild.name, message.guild.iconURL);
                       m.edit(endEmbed);
                     },duration);
                   });
                  msgg.edit(`:heavy_check_mark:| **ØªÙ…  Ø§Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚ÙŠÙ Ø§ÙˆÙŠ Ø¨Ù†Ø¬Ø§Ø­**`);
                } catch(e) {
                  msgg.edit(`:heavy_multiplication_x:| **Ù„ÙŠØ³ Ù„Ø¯ÙŠ Ø®Ø§ØµÙŠØ§Øª ÙƒØ§ÙÙŠØ©**`);
                  console.log(e);
                }
              });
            });
          });
        });
      });
    });
  }
});
 
client.on('message', message => {
if (message.content.startsWith(prefix + 'nn')) {
        let onlineM = message.guild.members.filter(m => m.presence.status !== "offline");
        let verifyL = ["None", "Low", "Medium", "Hard", "Extreme"];
        let region = {
            'brazil': "`Brazil`",
            'eu-central': "`Central Europe`",
            'singapore': "`Singapore`",
            'us-central': "`US Central`",
            'sydney': "`Sydney`",
            'us-east': "`US East`",
            'us-south': "`US South`",
            'us-west': "`US West`",
            'eu-west': "`Western Europe`",
            'london': "`London`",
            'amsterdam': "`Amsterdam`",
            'hongkong': "`Hong Kong`",
            'russia': "`Russia`"
        };    
let pages = [`- Server Name \`${message.guild.name}\`\n- Created At \`${moment(message.guild.createdAt).format('D/MM/YYYY h:mm a')}\`\n- Total Members \`${message.guild.memberCount} [Online: ${onlineM.size}]\`\n- Server Owner \`${message.guild.owner.user.tag}\`\n- Channels \`${message.guild.channels.filter(m => m.type == 'text').size} Text || ${message.guild.channels.filter(m => m.type == 'voice').size} Voice\`\n- Categories \`${message.guild.channels.filter(m => m.type == 'category').size}\`\n- Roles \`${message.guild.roles.size}\`\n- Region \`${region[message.guild.region]}\`\n- Verification Level \`${verifyL[message.guild.verificationLevel]}\`\n- Server ID \`${message.guild.id}\``,`- Ø§Ø³Ù… Ø§Ù„Ø³ÙŠØ±ÙØ± \`${message.guild.name}\`\n- ÙˆÙ‚Øª ØµÙ†Ø¹ Ø§Ù„Ø³ÙŠØ±ÙØ± \`${moment(message.guild.createdAt).format('D/MM/YYYY h:mm a')}\`\n- Ø¹Ø¯Ø¯ Ø§Ø¹Ø¶Ø§Ø¡ \`${message.guild.memberCount} [Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ†: ${onlineM.size}]\`\n- Ù…Ù†Ø´Ø§Ø¡ Ø§Ù„Ø³ÙŠØ±ÙØ± \`${message.guild.owner.user.tag}\`\n- Ø±ÙˆÙ…Ø§Øª \`${message.guild.channels.filter(m => m.type == 'text').size} ÙƒØªØ§Ø¨ÙŠØ© || ${message.guild.channels.filter(m => m.type == 'voice').size} ØµÙˆØªÙŠØ©\`\n- Ø§Ù„Ø§Ù‚Ø³Ø§Ù… \`${message.guild.channels.filter(m => m.type == 'category').size}\`\n- Ø±ØªØ¨ \`${message.guild.roles.size}\`\n- Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠØ±ÙØ± \`${region[message.guild.region]}\`\n- Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ­Ù‚Ù‚ \`${verifyL[message.guild.verificationLevel]}\`\n- Ø§ÙŠØ¯ÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ± \`${message.guild.id}\``]
    let page = 1;
 
    let embed = new Discord.RichEmbed()
    .setColor('#36393e')
 .setThumbnail(message.guild.iconURL)
        .setAuthor(`${message.guild.name}, Server Info`)
    .setFooter(`Page ${page} of ${pages.length}`)
    .setDescription(pages[page-1])
 
    message.channel.sendEmbed(embed).then(msg => {
 
        msg.react('â®').then( r => {
            msg.react('â­')
 
 
        const backwardsFilter = (reaction, user) => reaction.emoji.name === 'â®' && user.id === message.author.id;
        const forwardsFilter = (reaction, user) => reaction.emoji.name === 'â­' && user.id === message.author.id;
 
 
        const backwards = msg.createReactionCollector(backwardsFilter, { time: 2000000});
        const forwards = msg.createReactionCollector(forwardsFilter, { time: 2000000});
 
 
 
        backwards.on('collect', r => {
            if (page === 1) return;
            page--;
            embed.setDescription(pages[page-1]);
            embed.setFooter(`Page ${page} of ${pages.length}`);
            msg.edit(embed)
        })
        forwards.on('collect', r => {
            if (page === pages.length) return;
     
      page++;
            embed.setDescription(pages[page-1]);
            embed.setFooter(`Page ${page} of ${pages.length}`);
            msg.edit(embed)
        })
        })
    })
    }
});
